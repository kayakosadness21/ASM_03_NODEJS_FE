{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Documents\\\\Project3nodejs20.1.24\\\\frontend\\\\FE-ecommerce\\\\src\\\\components\\\\pages\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport LayoutLoginForm from \"../login/layout-login-form\";\nimport classes from \"./LoginPage.module.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loginAPI } from \"../lib/api-login\";\n// Tiêu chí số 3: Dùng Session hoặc Cookie để lưu trữ dữ liệu người dùng hiện tại\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const [validEmail, setValidEmail] = useState(true);\n  const [validPass, setValidPass] = useState(true);\n  const {\n    isLoggedIn,\n    isExistedUser,\n    isWrongPassword\n  } = useSelector(state => state.logInReducer);\n  const emailRef = useRef();\n  const passRef = useRef();\n  const validForm = validEmail && validPass;\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const signUpHandler = () => {\n    navigate(\"/register\");\n  };\n  useEffect(() => {\n    dispatch({\n      type: \"ACTIVE_LOGIN_PAGE\"\n    });\n    emailRef.current.focus();\n  }, [dispatch]);\n  if (isLoggedIn) {\n    navigate(\"/\");\n  }\n  // check empty\n  const isEmpty = inputValue => {\n    if (inputValue.trim() === \"\") {\n      return true;\n    }\n    return false;\n  };\n  const signInHandler = e => {\n    e.preventDefault();\n    if (validForm) {\n      dispatch(loginAPI({\n        email: emailRef.current.value,\n        password: passRef.current.value\n      }));\n    }\n  };\n  const handlingOnBlurEmail = e => {\n    if (isEmpty(e.target.value) || !e.target.value.includes(\"@\")) {\n      setValidEmail(false);\n      return;\n    }\n    setValidEmail(true);\n  };\n  const handlingOnBlurPass = e => {\n    if (isEmpty(e.target.value) || e.target.value.length < 6) {\n      setValidPass(false);\n      return;\n    }\n    setValidPass(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.login,\n    children: /*#__PURE__*/_jsxDEV(LayoutLoginForm, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        onSubmit: signInHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Email\",\n          ref: emailRef,\n          onBlur: handlingOnBlurEmail,\n          className: !validEmail ? classes.error : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), !validEmail && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes[\"error-massage\"],\n          children: \"The email is invalid, please check again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), !isExistedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes[\"error-massage\"],\n          children: \"The user is not existed, try again or sign up now!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          ref: passRef,\n          onBlur: handlingOnBlurPass,\n          className: !validPass ? classes.error : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), !validPass && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes[\"error-massage\"],\n          children: \"The password is not empty and at least 8 character.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), isWrongPassword && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes[\"error-massage\"],\n          children: \"The password is wrong, try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: !validForm ? classes[\"invalid-form\"] : \"\",\n          children: \"SIGN IN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Create an account? \", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: signUpHandler,\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"RvL4mmtiMFGeQNwY58vZ1veULoA=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["LayoutLoginForm","classes","useNavigate","useEffect","useRef","useState","useDispatch","useSelector","loginAPI","LoginPage","validEmail","setValidEmail","validPass","setValidPass","isLoggedIn","isExistedUser","isWrongPassword","state","logInReducer","emailRef","passRef","validForm","dispatch","navigate","signUpHandler","type","current","focus","isEmpty","inputValue","trim","signInHandler","e","preventDefault","email","value","password","handlingOnBlurEmail","target","includes","handlingOnBlurPass","length","login","form","error"],"sources":["C:/Users/ADMIN/Documents/Project3nodejs20.1.24/frontend/FE-ecommerce/src/components/pages/LoginPage.js"],"sourcesContent":["import LayoutLoginForm from \"../login/layout-login-form\";\r\nimport classes from \"./LoginPage.module.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginAPI } from \"../lib/api-login\";\r\n// Tiêu chí số 3: Dùng Session hoặc Cookie để lưu trữ dữ liệu người dùng hiện tại\r\n\r\nconst LoginPage = () => {\r\n  const [validEmail, setValidEmail] = useState(true);\r\n  const [validPass, setValidPass] = useState(true);\r\n  const { isLoggedIn, isExistedUser, isWrongPassword } = useSelector(\r\n    (state) => state.logInReducer\r\n  );\r\n  const emailRef = useRef();\r\n  const passRef = useRef();\r\n  const validForm = validEmail && validPass;\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const signUpHandler = () => {\r\n    navigate(\"/register\");\r\n  };\r\n  useEffect(() => {\r\n    dispatch({ type: \"ACTIVE_LOGIN_PAGE\" });\r\n    emailRef.current.focus();\r\n  }, [dispatch]);\r\n\r\n  if (isLoggedIn) {\r\n    navigate(\"/\");\r\n  }\r\n  // check empty\r\n  const isEmpty = (inputValue) => {\r\n    if (inputValue.trim() === \"\") {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const signInHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (validForm) {\r\n      dispatch(\r\n        loginAPI({\r\n          email: emailRef.current.value,\r\n          password: passRef.current.value,\r\n        })\r\n      );\r\n    }\r\n  };\r\n  const handlingOnBlurEmail = (e) => {\r\n    if (isEmpty(e.target.value) || !e.target.value.includes(\"@\")) {\r\n      setValidEmail(false);\r\n      return;\r\n    }\r\n    setValidEmail(true);\r\n  };\r\n  const handlingOnBlurPass = (e) => {\r\n    if (isEmpty(e.target.value) || e.target.value.length < 6) {\r\n      setValidPass(false);\r\n      return;\r\n    }\r\n    setValidPass(true);\r\n  };\r\n  return (\r\n    <div className={classes.login}>\r\n      <LayoutLoginForm>\r\n        <form className={classes.form} onSubmit={signInHandler}>\r\n          <label>Sign In</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Email\"\r\n            ref={emailRef}\r\n            onBlur={handlingOnBlurEmail}\r\n            className={!validEmail ? classes.error : \"\"}\r\n          />\r\n          {!validEmail && (\r\n            <div className={classes[\"error-massage\"]}>\r\n              The email is invalid, please check again\r\n            </div>\r\n          )}\r\n          {!isExistedUser && (\r\n            <div className={classes[\"error-massage\"]}>\r\n              The user is not existed, try again or sign up now!\r\n            </div>\r\n          )}\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            ref={passRef}\r\n            onBlur={handlingOnBlurPass}\r\n            className={!validPass ? classes.error : \"\"}\r\n          />\r\n          {!validPass && (\r\n            <div className={classes[\"error-massage\"]}>\r\n              The password is not empty and at least 8 character.\r\n            </div>\r\n          )}\r\n          {isWrongPassword && (\r\n            <div className={classes[\"error-massage\"]}>\r\n              The password is wrong, try again.\r\n            </div>\r\n          )}\r\n          <button className={!validForm ? classes[\"invalid-form\"] : \"\"}>\r\n            SIGN IN\r\n          </button>\r\n          <p>\r\n            Create an account? <span onClick={signUpHandler}>Sign up</span>\r\n          </p>\r\n        </form>\r\n      </LayoutLoginForm>\r\n    </div>\r\n  );\r\n};\r\nexport default LoginPage;\r\n"],"mappings":";;AAAA,OAAOA,eAAe,MAAM,4BAA4B;AACxD,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C;AAAA;AAEA,MAAMC,SAAS,GAAG,MAAM;EAAA;EACtB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM;IAAES,UAAU;IAAEC,aAAa;IAAEC;EAAgB,CAAC,GAAGT,WAAW,CAC/DU,KAAK,IAAKA,KAAK,CAACC,YAAY,CAC9B;EACD,MAAMC,QAAQ,GAAGf,MAAM,EAAE;EACzB,MAAMgB,OAAO,GAAGhB,MAAM,EAAE;EACxB,MAAMiB,SAAS,GAAGX,UAAU,IAAIE,SAAS;EACzC,MAAMU,QAAQ,GAAGhB,WAAW,EAAE;EAC9B,MAAMiB,QAAQ,GAAGrB,WAAW,EAAE;EAC9B,MAAMsB,aAAa,GAAG,MAAM;IAC1BD,QAAQ,CAAC,WAAW,CAAC;EACvB,CAAC;EACDpB,SAAS,CAAC,MAAM;IACdmB,QAAQ,CAAC;MAAEG,IAAI,EAAE;IAAoB,CAAC,CAAC;IACvCN,QAAQ,CAACO,OAAO,CAACC,KAAK,EAAE;EAC1B,CAAC,EAAE,CAACL,QAAQ,CAAC,CAAC;EAEd,IAAIR,UAAU,EAAE;IACdS,QAAQ,CAAC,GAAG,CAAC;EACf;EACA;EACA,MAAMK,OAAO,GAAIC,UAAU,IAAK;IAC9B,IAAIA,UAAU,CAACC,IAAI,EAAE,KAAK,EAAE,EAAE;MAC5B,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC;EAED,MAAMC,aAAa,GAAIC,CAAC,IAAK;IAC3BA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAIZ,SAAS,EAAE;MACbC,QAAQ,CACNd,QAAQ,CAAC;QACP0B,KAAK,EAAEf,QAAQ,CAACO,OAAO,CAACS,KAAK;QAC7BC,QAAQ,EAAEhB,OAAO,CAACM,OAAO,CAACS;MAC5B,CAAC,CAAC,CACH;IACH;EACF,CAAC;EACD,MAAME,mBAAmB,GAAIL,CAAC,IAAK;IACjC,IAAIJ,OAAO,CAACI,CAAC,CAACM,MAAM,CAACH,KAAK,CAAC,IAAI,CAACH,CAAC,CAACM,MAAM,CAACH,KAAK,CAACI,QAAQ,CAAC,GAAG,CAAC,EAAE;MAC5D5B,aAAa,CAAC,KAAK,CAAC;MACpB;IACF;IACAA,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EACD,MAAM6B,kBAAkB,GAAIR,CAAC,IAAK;IAChC,IAAIJ,OAAO,CAACI,CAAC,CAACM,MAAM,CAACH,KAAK,CAAC,IAAIH,CAAC,CAACM,MAAM,CAACH,KAAK,CAACM,MAAM,GAAG,CAAC,EAAE;MACxD5B,YAAY,CAAC,KAAK,CAAC;MACnB;IACF;IACAA,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EACD,oBACE;IAAK,SAAS,EAAEZ,OAAO,CAACyC,KAAM;IAAA,uBAC5B,QAAC,eAAe;MAAA,uBACd;QAAM,SAAS,EAAEzC,OAAO,CAAC0C,IAAK;QAAC,QAAQ,EAAEZ,aAAc;QAAA,wBACrD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAAsB,eACtB;UACE,IAAI,EAAC,MAAM;UACX,WAAW,EAAC,OAAO;UACnB,GAAG,EAAEZ,QAAS;UACd,MAAM,EAAEkB,mBAAoB;UAC5B,SAAS,EAAE,CAAC3B,UAAU,GAAGT,OAAO,CAAC2C,KAAK,GAAG;QAAG;UAAA;UAAA;UAAA;QAAA,QAC5C,EACD,CAAClC,UAAU,iBACV;UAAK,SAAS,EAAET,OAAO,CAAC,eAAe,CAAE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAG1C,EACA,CAACc,aAAa,iBACb;UAAK,SAAS,EAAEd,OAAO,CAAC,eAAe,CAAE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAG1C,eACD;UACE,IAAI,EAAC,UAAU;UACf,WAAW,EAAC,UAAU;UACtB,GAAG,EAAEmB,OAAQ;UACb,MAAM,EAAEoB,kBAAmB;UAC3B,SAAS,EAAE,CAAC5B,SAAS,GAAGX,OAAO,CAAC2C,KAAK,GAAG;QAAG;UAAA;UAAA;UAAA;QAAA,QAC3C,EACD,CAAChC,SAAS,iBACT;UAAK,SAAS,EAAEX,OAAO,CAAC,eAAe,CAAE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAG1C,EACAe,eAAe,iBACd;UAAK,SAAS,EAAEf,OAAO,CAAC,eAAe,CAAE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAG1C,eACD;UAAQ,SAAS,EAAE,CAACoB,SAAS,GAAGpB,OAAO,CAAC,cAAc,CAAC,GAAG,EAAG;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAEpD,eACT;UAAA,+CACqB;YAAM,OAAO,EAAEuB,aAAc;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAAe;QAAA;UAAA;UAAA;UAAA;QAAA,QAC7D;MAAA;QAAA;QAAA;QAAA;MAAA;IACC;MAAA;MAAA;MAAA;IAAA;EACS;IAAA;IAAA;IAAA;EAAA,QACd;AAEV,CAAC;AAAC,GAzGIf,SAAS;EAAA,QAG0CF,WAAW,EAMjDD,WAAW,EACXJ,WAAW;AAAA;AAAA,KAVxBO,SAAS;AA0Gf,eAAeA,SAAS;AAAC;AAAA"},"metadata":{},"sourceType":"module"}